<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>点击发送邮件3s内撤销</title>
<style>
	#msg{
		border:1px solid red;
		width:200px;
		height:30px;
		text-align:center;
		font-size:30px;
		line-height:30px;
	}
</style>
</head>
<body>
	<p>
		<input type="button" value="发送" 
			onclick="send();"/>
		<input type="button" value="撤销" 
			onclick="cancel();"/>
	</p>
	<p id="msg"></p>
	
	<script>
		var id;
		
		function send(){
			var p = 
				document.getElementById("msg");
			
			p.innerHTML = "正在发送";
			
			if (id){return;}
			
			// 推辞3s显示已发送
			id = setTimeout(function(){
				p.innerHTML = "已发送";
			}, 3000);
		}
		
		function cancel(){
			if(id){
				clearTimeout(id);
				var p = 
					document.getElementById("msg");
				p.innerHTML = "已撤销";
				id = null;
			}
		}
	</script>
</body>
</html>